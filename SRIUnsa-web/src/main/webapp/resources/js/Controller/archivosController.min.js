
investigacionApp.controller("archivosController",["$log","$scope","$location","$rootScope","$filter","ArchivosService","SharedService",function(p,l,f,j,i,o,d){l.sharedService=d;l.files=[];l.file={};var g=function(q){p.debug("GetArchivo - Success");console.log("Respuesta :: ",q);l.files=q;console.log("Success :: ",l.files)};var n=function(q){p.debug("GetArchivo - Error");console.log("Respuesta :: ",q)};var k=function(q){p.debug("DescargarArchivo - Success");console.log("Respuesta :: ",q)};var c=function(q){p.debug("DescargarArchivo - Error");console.log("Respuesta :: ",q)};var m=function(q){p.debug("SubirArchivo - Success");console.log("Respuesta :: ",q);l.getArchivosByPagina()};var a=function(q){p.debug("SubirArchivo - Error");console.log("Respuesta :: ",q)};l.getArchivos=function(){o.getArchivos().then(g,n)};l.updateArchivo=function(){var q=l.fileDirectiva;console.log("archivo ======> ",q);var r=new FormData();r.append("file",q);o.subirArchivo(r).then(m,a)};l.descargarArchivo=function(q){o.descargarArchivo(q.id).then(k,c)};l.copiarArchivo=function(q){l.file=q};l.cancel=function(){l.privilegio={}};var h=function(r,q){ngToast.create({className:q,content:'<span class="alert-link">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+r+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>"})};l.rangoPaginas=[5,10,20,100];l.currentPage=1;l.currentRango=l.rangoPaginas[0];l.maxSize=5;l.total=0;l.numPages=function(){return Math.ceil(l.total/l.currentRango)};l.$watch("currentPage + currentRango",function(){l.getArchivosByPagina()});var b=function(q){p.debug("getArchivosByPagina - Success");console.log("Respuesta :: ",q);l.files=[];l.files=q.lista;l.total=q.total};var e=function(q){p.debug("getArchivosByPagina - Error");console.log("Respuesta :: ",q)};l.getArchivosByPagina=function(){var q={currentPage:l.currentPage,rango:l.currentRango,total:l.total,filtro:l.buscar};o.getArchivosByPagina(q).then(b,e)};l.clickBuscar=function(){l.getArchivosByPagina()};l.getArchivosByPagina()}]);