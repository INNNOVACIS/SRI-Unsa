
investigacionApp.controller("ActividadesDocenteController",["$log","$scope","$location","TipoInvestigacionService","SharedService","ActividadesGeneradasService","SRIUnsaConfig","SemestreService",function(p,n,h,m,g,j,a,c){n.sharedService=g;n.sortType="id";n.sortReverse=false;n.nombreCompleto=n.sharedService.docente.snombre+" "+n.sharedService.docente.sapellido;var d=function(q){p.debug("GetSemestre - Success");console.log("Respuesta :: ",q);n.semestres=q;k()};var b=function(q){p.debug("GetSemestre - Error");console.log("Respuesta :: ",q)};var f=function(q){p.debug("GetTipoInvestigaciones - Success");console.log("Respuesta :: ",q);n.tipoInvestigaciones=q};var l=function(q){p.debug("GetTipoInvestigaciones - Error");console.log("Respuesta :: ",q)};var e=function(q){p.debug("GetActividadesGeneradas - Success");console.log("Respuesta :: ",q);n.actividadesGeneradas=[];n.actividadesGeneradas=q.lista;n.total=q.total};var i=function(q){p.debug("GetActividadesGeneradas - Error");console.log("Respuesta :: ",q)};n.getSemestres=function(){c.getSemestres().then(d,b)};n.GetTipoInvestigaciones=function(){m.getInvestigaciones().then(f,l)};n.goHome=function(q){sessvars.tipoInvestigacion=q;n.sharedService.tipoInvestigacion=sessvars.tipoInvestigacion;h.path("/home")};n.changeSemestre=function(q){n.semestre=q;n.getActividades()};var k=function(){angular.forEach(n.semestres,function(r,q){if(r.snombreSemestre==="2016-II Semestre II"){n.semestre=r}});n.getActividades()};n.verActividadById=function(q){n.sharedService.scrollTop();n.loader=true;h.path("/actividad/Generadas/"+q.idactividadinvestigacion)};n.rangoPaginas=[5,10,20,100];n.currentPage=1;n.currentRango=n.rangoPaginas[0];n.maxSize=5;n.total=0;n.numPages=function(){return Math.ceil(n.total/n.currentRango)};n.$watch("currentPage + currentRango",function(){n.getActividades()});var o=function(){var q={nidTipoActividadInvestigacion:(n.tipoInvestigacion===null||n.tipoInvestigacion===undefined||n.tipoInvestigacion==="")?"":n.tipoInvestigacion.nidTipoActividadInvestigacion,sfacultad:(n.facultad===null||n.facultad===undefined||n.facultad==="")?"":n.facultad.snombreEstructuraOrganizacion,sdepartamento:(n.departamento===null||n.departamento===undefined||n.departamento==="")?"":n.departamento.snombreEstructuraOrganizacion,sescuela:(n.escuela===null||n.escuela===undefined||n.escuela==="")?"":n.escuela.snombreEstructuraOrganizacion,ssemestre:(n.semestre===null||n.semestre===undefined||n.semestre==="")?"":n.semestre.snombreSemestre,sfondoConcursable:(n.fondo===null||n.fondo===undefined||n.fondo==="")?"":n.fondo.snombreFondoConcursable};return q};n.getActividades=function(){var q={currentPage:n.currentPage,rango:n.currentRango,total:n.total,idUsuario:n.sharedService.idDocente,idEstado:a.CREADO,idFlujoActor:"",filtro:o()};j.GetActividadesGeneradas(q).then(e,i)};n.getSemestres();n.GetTipoInvestigaciones()}]);