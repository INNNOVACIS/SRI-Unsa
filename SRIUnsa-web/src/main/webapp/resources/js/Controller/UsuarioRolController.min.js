
investigacionApp.controller("UsuarioRolController",["$log","$scope","UsuarioRolService","RolService","UsuariosService","SharedService",function(o,n,i,g,e,l){n.sharedService=l;n.usuarioRoles=[];n.usuarioRol={};n.roles=[];n.rol={};var h=function(s){console.log("GetRol Success :: ",s);n.roles=s};var r=function(s){console.log("GetRol - Error :: ",s)};var p=function(s){o.debug("Update UsuarioRol - Success");q();console.log(s)};var k=function(s){o.debug("Update UsuarioRol - Error");console.log(s)};var a=function(s){o.debug("GetUsuarios - Success");console.log("Respuesta :: ",s);n.usuarios=s};var b=function(s){o.debug("GetUsuarios - Error");console.log("Respuesta :: ",s)};var f=function(s){o.debug("registrarUsuarioRol - Success");console.log("Respuesta :: ",s);n.getUsuariosRolByPagina()};var d=function(s){o.debug("registrarUsuarioRol - Error");console.log("Respuesta :: ",s)};n.getUsuarios=function(){e.getUsuarios().then(a,b)};n.getRoles=function(){g.getRoles().then(h,r)};n.update=function(s){n.usuarioRol=s;n.rol=c(s.idRol)};n.actualizarUsuarioRol=function(){var s={nidUsuarioRol:n.usuarioRol.nidUsuarioRol,nidUsuario:n.usuarioRol.idUsuario,nidRol:n.rol.nidRol};i.updateUsuarioRol(s).then(p,k)};var q=function(){n.usuarioRol.nombreRol=n.rol.snombreRol};var c=function(s){var t=null;angular.forEach(n.roles,function(v,u){if(v.nidRol===s){t=v}});return t};n.registrarUsuarioRol=function(){var s={nidUsuario:n.usuario.nidUsuario,nidRol:n.rol.nidRol,suserCreacion:n.sharedService.nombreUsuario,sestado:"A"};i.registrarUsuarioRol(s).then(f,d)};n.rangoPaginas=[5,10,20,100];n.currentPage=1;n.currentRango=n.rangoPaginas[0];n.maxSize=5;n.total=0;n.buscar="";n.numPages=function(){return Math.ceil(n.total/n.currentRango)};n.$watch("currentPage + currentRango",function(){n.getUsuariosRolByPagina();n.row=(n.currentPage-1)*n.currentRango+1});var j=function(s){o.debug("GetUsuariosRol - Success");console.log("Respuesta :: ",s);n.usuarioRoles=[];n.usuarioRoles=s.lista;n.total=s.total};var m=function(s){o.debug("GetUsuariosRol - Error");console.log("Respuesta :: ",s)};n.getUsuariosRolByPagina=function(){var s={currentPage:n.currentPage,rango:n.currentRango,total:n.total,filtro:n.buscar};i.getUsuariosRolByPagina(s).then(j,m)};n.clickBuscar=function(){n.getUsuariosRolByPagina()};n.getUsuarios();n.getRoles();n.getUsuariosRolByPagina()}]);