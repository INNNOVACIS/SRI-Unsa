
investigacionApp.controller("HomeVicerectorController",["$log","$scope","UsuariosService","$location","SharedService","HomeVicerectorService",function(p,n,a,g,d,f){n.sharedService=d;n.users=[];n.usuario={};n.estados=["A","I"];n.idTipoInvestigacion=0;n.idFacultad=0;n.idDepartamento=0;n.currentTipo=0;n.currentFacultad=false;var i=function(q){p.debug("GetTotalDocentesActivosInactivos - Success");console.log("Respuesta :: ",q);h(q.body);n.docentes=q.body};var o=function(q){p.debug("GetTotalDocentesActivosInactivos - Error");console.log("Respuesta :: ",q.body)};var e=function(q){p.debug("GetTotalActividadesByTipoActividad - Success");console.log("Respuesta :: ",q);n.tipoInvestigaciones=q.body};var j=function(q){p.debug("GetTotalActividadesByTipoActividad - Error");console.log("Respuesta :: ",q)};var m=function(q){p.debug("GetActivosInactivosByFacultad - Success");console.log("Respuesta :: ",q);n.docentesFacultades=[];n.docentesFacultades=q.body;angular.forEach(n.docentesFacultades,function(s,r){s.porcentajeActivo=c(s.ntotal,s.nactivos);s.porcentajeInactivo=c(s.ntotal,s.ninactivos)})};var k=function(q){p.debug("GetActivosInactivosByFacultad - Error");console.log("Respuesta :: ",q)};n.GetTotalActividadesByTipoActividad=function(){f.GetTotalActividadesByTipoActividad().then(e,j)};n.GetActivosInactivosByFacultad=function(q){f.GetActivosInactivosByFacultad(q).then(m,k)};n.verDetalleDocente=function(q){console.log("USUARIO :: ",q);sessvars.docente=q;sessvars.idDocente=q.nidUsuario;n.sharedService.idDocente=sessvars.idDocente;n.sharedService.docente=sessvars.docente;g.path("/actividadesDocente")};n.setTipoInvestigacion=function(q){if(n.currentTipo===q.nidTipoActividadInvestigacion){n.currentTipo=0;n.idTipoInvestigacion=0}else{n.currentTipo=q.nidTipoActividadInvestigacion;n.idTipoInvestigacion=q.nidTipoActividadInvestigacion}n.sharedService.tipoInvestigacion=q;n.getUsuariosByPagina();n.GetActivosInactivosByFacultad(n.idTipoInvestigacion)};n.filtrarFacultad=function(q){if(q.nidEstructuraOrganizacion===n.currentFacultad){n.currentFacultad=0;n.idFacultad=0}else{n.currentFacultad=q.nidEstructuraOrganizacion;n.idFacultad=q.nidEstructuraOrganizacion}n.getUsuariosByPagina()};n.GetTotalDocentesActivosInactivos=function(){a.GetTotalDocentesActivosInactivos().then(i,o)};n.clickBuscar=function(){n.getUsuariosByPagina()};var c=function(s,r){var q="50%";if(s!==0){q=(r*100/s)+"%"}else{}return q};var h=function(q){var r=q.nactivos+q.ninactivos;n.activo=(q.nactivos*100/r)+"%";n.inactivo=(q.ninactivos*100/r)+"%"};n.rangoPaginas=[5,10,20,100];n.currentPage=1;n.currentRango=n.rangoPaginas[0];n.maxSize=5;n.total=0;n.numPages=function(){return Math.ceil(n.total/n.currentRango)};n.$watch("currentPage + currentRango",function(){n.getUsuariosByPagina();n.row=(n.currentPage-1)*n.currentRango+1;console.log("FILA-INICIO :: ",n.idFila)});var b=function(q){p.debug("Get paginacionUsuario - Success");console.log("Respuesta :: ",q);n.users=[];n.users=q.lista;n.total=q.total};var l=function(q){p.debug("Get paginacionUsuario - Error");console.log("Respuesta :: ",q)};n.getUsuariosByPagina=function(){var q={currentPage:n.currentPage,rango:n.currentRango,total:n.total,filtro:n.buscar,idFacultad:n.idFacultad,idDepartamento:n.idDepartamento,idTipoInvestigacion:n.idTipoInvestigacion};a.GetUsuariosColor(q).then(b,l)};n.getUsuariosByPagina();n.GetTotalDocentesActivosInactivos();n.GetActivosInactivosByFacultad(n.idTipoInvestigacion);n.GetTotalActividadesByTipoActividad()}]);