
investigacionApp.controller("UsuarioFlujoController",["$log","$scope","UsuarioFlujoService","FlujoActorService","UsuariosService","RolService","UsuarioRolService","SharedService",function(B,A,i,E,h,n,p,s){A.sharedService=s;A.usuarioActores=[];A.usuarioActor={};A.usuarios=[];A.actores=[];A.actoresById=[];A.actorById={};A.rolesById=[];A.rolById={};A.listaActores=[];var y=function(G){B.debug("Registrar Usuario Actor - Success");console.log("Respuesta :: ",G);A.getUsuarioFlujoByPagina();var H=A.usuario===undefined?A.usuarioActor.nidUsuario:A.usuario.nidUsuario;i.getUsuarioFlujoActorByIdUsuario(H).then(l,r)};var t=function(G){B.debug("Registrar Usuario Actor - Error");console.log("Respuesta :: ",G)};var k=function(G){B.debug("RegistrarUsuarioRol - Success");console.log("Respuesta :: ",G);A.getUsuarioFlujoByPagina();p.getUsuarioRolByIdUsuario(A.usuario.nidUsuario).then(D,z)};var g=function(G){B.debug("RegistrarUsuarioRol - Error");console.log("Respuesta :: ",G)};var w=function(G){B.debug("deleteUsuarioRol - Success");console.log("Respuesta :: ",G);if(G===true){p.getUsuarioRolByIdUsuario(A.usuarioActor.nidUsuario).then(D,z)}};var x=function(G){B.debug("deleteUsuarioRol - Error");console.log("Respuesta :: ",G)};var f=function(G){B.debug("Update Usuario Actor - Success");console.log("Respuesta :: ",G);A.usuarioActor=G;A.getUsuarioFlujoByPagina()};var o=function(G){B.debug("Update Usuario Actor - Error");console.log("Respuesta :: ",G)};var u=function(H){B.debug("Delete Usuario Actor - Success");A.usuarioActor=H;A.getUsuarioFlujoByPagina();var G=A.usuario===undefined?A.usuarioActor.nidUsuario:A.usuario.nidUsuario;i.getUsuarioFlujoActorByIdUsuario(G.nidUsuario).then(l,r)};var C=function(G){B.debug("Delete Usuario Actor - Error");console.log("Respuesta :: ",G)};var d=function(G){B.debug("GetUsuarios - Success");console.log("Respuesta :: ",G);A.usuarios=G};var e=function(G){B.debug("GetUsuarios - Error");console.log("Respuesta :: ",G)};var j=function(G){B.debug("GetUsuariosActores - Success");console.log("Respuesta :: ",G);A.actores=G};var a=function(G){B.debug("GetUsuariosActores - Error");console.log("Respuesta :: ",G)};var l=function(G){B.debug("getUsuarioFlujoActorByIdUsuario - Success");console.log("Respuesta :: ",G);A.actoresById=[];A.actoresById=G};var r=function(G){B.debug("getUsuarioFlujoActorByIdUsuario - Error");console.log("Response :: ",G)};var D=function(G){B.debug("getUsuarioRolByIdUsuario - Success");console.log("Respuesta :: ",G);A.rolesById=[];A.rolesById=G};var z=function(G){B.debug("getUsuarioRolByIdUsuario - Error");console.log("Respuesta :: ",G)};var c=function(G){B.debug("deleteUsuarioFlujo - Success");console.log("Respuesta :: ",G);if(G===true){i.getUsuarioFlujoActorByIdUsuario(A.usuarioActor.nidUsuario).then(l,r)}};var b=function(G){B.debug("deleteUsuarioFlujo - Error");console.log("Respuesta :: ",G)};var m=function(G){console.log("GetRol Success :: ",G);console.log("Respuesta :: ",G);A.roles=G};var F=function(G){B.debug("GetRol - Error");console.log("Respuesta :: ",G)};A.getUsuarios=function(){h.getUsuarios().then(d,e)};A.getUsuarioActores=function(){E.getActores().then(j,a)};A.registrarUsuarioActor=function(){var G=[];angular.forEach(A.listaActores,function(J,H){var I={nidFlujoActor:J.nidFlujoActor,nidUsuario:A.usuario===undefined?A.usuarioActor.nidUsuario:A.usuario.nidUsuario,suserCreacion:A.sharedService.nombreUsuario,sestado:"A"};G.push(I)});i.registrarUsuarioActor(G).then(y,t)};A.actualizarUsuarioActor=function(){var H=[];var G={nidFlujoActor:A.actor.nidFlujoActor,nidUsuario:A.usuario===undefined?A.usuarioActor.nidUsuario:A.usuario.nidUsuario,suserCreacion:A.sharedService.nombreUsuario,sestado:"A"};H.push(G);i.registrarUsuarioActor(H).then(y,t)};A.agregarUsuarioActorLista=function(){A.listaActores.push(A.actor);console.log("Agregar :: ",A.listaActores)};A.eliminarUsuarioActorLista=function(G){var H=A.listaActores.indexOf(G);A.listaActores.splice(H,1);console.log("Eliminar :: ",A.listaActores)};A.registrarUsuarioRol=function(){var G={nidRol:A.rol.nidRol,nidUsuario:A.usuario===undefined?A.usuarioActor.nidUsuario:A.usuario.nidUsuario,suserCreacion:A.sharedService.nombreUsuario,sestado:"A"};p.registrarUsuarioRol(G).then(k,g)};A.updateUsuarioActor=function(){A.actor.suserModificacion=A.sharedService.nombreUsuario;A.actor.sestado="A";i.updateUsuarioActor(A.actor).then(f,o)};A.deleteUsuarioActor=function(G){A.usuarioActor=G;A.actor.suserModificacion=A.sharedService.nombreUsuario;i.deleteRol(A.usuarioActor).then(u,C)};A.deleteUsuarioFlujo=function(H){console.log(A.usuarioActor);console.log(H);var G={nidUsuarioFlujo:H.nidUsuarioFlujo,nidFlujoActor:H.nidFlujoActor,nidUsuario:A.usuarioActor.nidUsuario};i.deleteUsuarioFlujo(G).then(c,b)};A.deleteUsuarioRol=function(G){console.log(G);var H={nidUsuarioRol:G.nidUsuarioRol};p.deleteUsuarioRol(H).then(w,x)};A.getRoles=function(){n.getRoles().then(m,F)};A.update=function(G){A.usuarioActor=G;i.getUsuarioFlujoActorByIdUsuario(G.nidUsuario).then(l,r)};A.updatePaginacion=function(){A.getUsuarioFlujoByPagina()};A.rangoPaginas=[5,10,20,100];A.currentPage=1;A.currentRango=A.rangoPaginas[0];A.maxSize=5;A.total=0;A.numPages=function(){return Math.ceil(A.total/A.currentRango)};A.$watch("currentPage + currentRango",function(){A.getUsuarioFlujoByPagina()});var q=function(G){B.debug("Get Paginacion Usuarios Actores - Success");console.log("Respuesta :: ",G);A.usuarioActores=[];A.usuarioActores=G.lista;A.total=G.total};var v=function(G){B.debug("Get Paginacion Usuario Actores - Error");console.log("Respuesta :: ",G)};A.getUsuarioFlujoByPagina=function(){var G={currentPage:A.currentPage,rango:A.currentRango,total:A.total,filtro:A.buscar};i.getUsuarioFlujoByPagina(G).then(q,v)};A.clickBuscar=function(){A.getUsuarioFlujoByPagina()};A.getRoles();A.getUsuarioActores();A.getUsuarios();A.getUsuarioFlujoByPagina()}]);