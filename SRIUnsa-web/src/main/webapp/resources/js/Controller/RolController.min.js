
investigacionApp.controller("RolController",["$log","$scope","ngToast","RolService","SharedService",function(p,n,o,k,g){n.sharedService=g;n.roles=[];n.rol={};var e=function(q){p.debug("GetRol - Success");console.log("Respuesta :: ",q);n.rol=q};var m=function(q){p.debug("Get Rol - Error");console.log("Respuesta :: ",q)};var c=function(q){p.debug("RegistrarRol - Success");console.log("Respuesta :: ",q);n.getRolesByPagina();n.cancel();$("#popNuevoRol").modal("toggle")};var b=function(q){p.debug("RegistrarRol - Error");console.log("Respuesta :: ",q);n.cancel()};var a=function(q){p.debug("UpdateUser - Success");console.log("Respuesta :: ",q);n.getRolesByPagina();n.cancel();$("#popUpdateRol").modal("toggle")};var j=function(q){p.debug("UpdateUser - Error");console.log("Respuesta :: ",q);n.cancel()};var f=function(q){p.debug("DeleteUser - Success");console.log("Respuesta :: ",q);n.getRolesByPagina();n.cancel()};var d=function(q){p.debug("DeleteUser - Error");console.log("Respuesta :: ",q);n.cancel()};n.getRoles=function(){k.getRoles().then(e,m)};n.registrarRol=function(){n.submitted=true;if(n.formRegistroRol.$valid){n.rol.suserCreacion=n.sharedService.nombreUsuario;n.rol.sestado="A";k.registrarRol(n.rol).then(c,b);l("Registrado!","success")}else{console.log("No se registro Semestre :: ",n.semestre);l("Error al registrar!","danger")}};n.updateRol=function(){n.submitted=true;if(n.formUpdateRol.$valid){n.rol.suserModificacion=n.sharedService.nombreUsuario;n.rol.sestado="A";k.updateRol(n.rol).then(a,j);l("Actualizado!","success")}else{console.log("No se registro el Rol :: ",n.semestre);l("Error al actualizar!","danger")}};n.deleteRol=function(q){n.rol=q;k.deleteRol(n.rol).then(f,d)};n.update=function(q){angular.copy(q,n.rol)};n.cancel=function(){n.rol={}};var l=function(r,q){o.create({className:q,content:'<span class="alert-link">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+r+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>"})};n.rangoPaginas=[5,10,20,100];n.currentPage=1;n.currentRango=n.rangoPaginas[0];n.maxSize=5;n.total=0;n.numPages=function(){return Math.ceil(n.total/n.currentRango)};n.$watch("currentPage + currentRango",function(){n.getRolesByPagina()});var i=function(q){p.debug("Get paginacionUsuario - Success");n.roles=[];n.roles=q.lista;n.total=q.total};var h=function(q){console.log("error :: ",q)};n.getRolesByPagina=function(){var q={currentPage:n.currentPage,rango:n.currentRango,total:n.total,filtro:n.buscar};k.getRolesByPagina(q).then(i,h)};n.clickBuscar=function(){n.getRolesByPagina()};n.getRolesByPagina()}]);