
investigacionApp.controller("HomeDocenteController",["$log","$scope","$location","TipoInvestigacionService","SharedService","ActividadesGeneradasService","SRIUnsaConfig","SemestreService","UsuariosService",function(n,m,i,q,l,a,s,b,h){m.sharedService=l;m.sortType="id";m.sortReverse=false;var r=function(t){n.debug("GetSemestre - Success");console.log("Respuesta :: ",t);m.semestres=t;g()};var p=function(t){n.debug("GetSemestre - Error");console.log("Respuesta :: ",t)};var e=function(t){n.debug("GetTipoInvestigaciones - Success");console.log("Respuesta :: ",t);m.tipoInvestigaciones=t};var o=function(t){n.debug("GetTipoInvestigaciones - Error");console.log("Respuesta :: ",t)};var k=function(t){n.debug("GetActividadesGeneradas - Success");console.log("Respuesta :: ",t);m.actividadesGeneradas=[];m.actividadesGeneradas=t.lista;m.total=t.total};var c=function(t){n.debug("GetActividadesGeneradas - Error");console.log("Respuesta :: ",t)};var j=function(t){n.debug("GetUsuarioHome - Success");console.log("Respuesta :: ",t);sessvars.usuarioHome=t.body;m.sharedService.usuarioHome=t.body};var d=function(t){n.debug("GetUsuarioHome - Error");console.log("Respuesta :: ",t)};m.getSemestres=function(){b.getSemestres().then(r,p)};m.GetTipoInvestigaciones=function(){q.getInvestigaciones().then(e,o)};m.GetUsuarioHome=function(t){h.GetUsuarioHome(t).then(j,d)};m.goHome=function(t){sessvars.tipoInvestigacion=t;m.sharedService.tipoInvestigacion=sessvars.tipoInvestigacion;i.path("/home")};m.changeSemestre=function(t){m.semestre=t;m.getActividades()};var g=function(){angular.forEach(m.semestres,function(u,t){if(u.snombreSemestre==="2016-II Semestre II"){m.semestre=u}});m.getActividades()};m.rangoPaginas=[5,10,20,100];m.currentPage=1;m.currentRango=m.rangoPaginas[0];m.maxSize=5;m.total=0;m.numPages=function(){return Math.ceil(m.total/m.currentRango)};m.$watch("currentPage + currentRango",function(){m.getActividades()});var f=function(){var t={nidTipoActividadInvestigacion:(m.tipoInvestigacion===null||m.tipoInvestigacion===undefined||m.tipoInvestigacion==="")?"":m.tipoInvestigacion.nidTipoActividadInvestigacion,sfacultad:(m.facultad===null||m.facultad===undefined||m.facultad==="")?"":m.facultad.snombreEstructuraOrganizacion,sdepartamento:(m.departamento===null||m.departamento===undefined||m.departamento==="")?"":m.departamento.snombreEstructuraOrganizacion,sescuela:(m.escuela===null||m.escuela===undefined||m.escuela==="")?"":m.escuela.snombreEstructuraOrganizacion,ssemestre:(m.semestre===null||m.semestre===undefined||m.semestre==="")?"":m.semestre.snombreSemestre,sfondoConcursable:(m.fondo===null||m.fondo===undefined||m.fondo==="")?"":m.fondo.snombreFondoConcursable};return t};m.getActividades=function(){var t={currentPage:m.currentPage,rango:m.currentRango,total:m.total,idUsuario:m.sharedService.idDocente,idEstado:s.CREADO,idFlujoActor:"",filtro:f()};a.GetActividadesGeneradas(t).then(k,c)};if(m.sharedService.idUsuarioRegistrar===-1){console.log("Vicerector o Director de Unidad :: ",m.sharedService.idUsuarioRegistrar)}else{console.log("Docente a Registrar :: ",m.sharedService.idUsuarioRegistrar);m.GetUsuarioHome(m.sharedService.idUsuarioRegistrar)}m.getSemestres();m.GetTipoInvestigaciones()}]);