
investigacionApp.controller("PrivilegioController",["$log","$scope","ngToast","PrivilegioService","SharedService",function(p,k,n,h,d){k.sharedService=d;k.privilegios=[];k.privilegio={};var j=function(q){p.debug("GetPrivilegio - Success");console.log("Respuesta :: ",q);k.privilegio=q};var f=function(q){p.debug("Get Privilegio - Error");console.log("Respuesta :: ",q)};var b=function(q){p.debug("RegistrarPrivilegio - Success");console.log("Respuesta :: ",q);k.getPrivilegiosByPagina();k.cancel();$("#popNuevoPrivilegio").modal("toggle")};var a=function(q){p.debug("Registrar Privilegio - Error");console.log("Respuesta :: ",q);k.cancel()};var e=function(q){p.debug("UpdatePrivilegio - Success");console.log("Respuesta :: ",q);k.getPrivilegiosByPagina();k.cancel();$("#popUpdatePrivilegio").modal("toggle")};var c=function(q){p.debug("UpdatePrivilegio - Error");console.log("Respuesta :: ",q);k.cancel()};var o=function(q){p.debug("DeletePrivilegio - Success");console.log("Respuesta :: ",q);k.getPrivilegiosByPagina();k.cancel()};var m=function(q){p.debug("DeletePrivilegio - Success");console.log("Respuesta :: ",q);k.cancel()};k.getPrivilegios=function(){h.getPrivilegios().then(j,f)};k.registrarPrivilegio=function(){k.submitted=true;if(k.formRegistroPrivilegio.$valid){k.privilegio.suserCreacion=k.sharedService.nombreUsuario;k.privilegio.sestado="A";h.registrarPrivilegio(k.privilegio).then(b,a);g("Registrado!","success")}else{console.log("No se registro Semestre :: ",k.semestre);g("Error al registrar!","danger")}};k.updatePrivilegio=function(){k.submitted=true;if(k.formUpdatePrivilegio.$valid){k.privilegio.suserModificacion=k.sharedService.nombreUsuario;k.privilegio.sestado="A";h.updatePrivilegio(k.privilegio).then(e,c);g("Actualizado!","success")}else{console.log("No se registro Semestre :: ",k.semestre);g("Error al actualizar!","danger")}};k.deletePrivilegio=function(q){k.privilegio=q;h.deletePrivilegio(k.privilegio).then(o,m)};k.update=function(q){angular.copy(q,k.privilegio)};k.cancel=function(){k.privilegio={}};var g=function(r,q){n.create({className:q,content:'<span class="alert-link">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+r+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>"})};k.rangoPaginas=[5,10,20,100];k.currentPage=1;k.currentRango=k.rangoPaginas[0];k.maxSize=5;k.total=0;k.numPages=function(){return Math.ceil(k.total/k.currentRango)};k.$watch("currentPage + currentRango",function(){k.getPrivilegiosByPagina()});var l=function(q){p.debug("getPrivilegiosByPagina - Success");k.privilegios=[];k.privilegios=q.lista;k.total=q.total};var i=function(q){p.debug("getPrivilegiosByPagina - Success");console.log("Respuesta  :: ",q)};k.getPrivilegiosByPagina=function(){var q={currentPage:k.currentPage,rango:k.currentRango,total:k.total,filtro:k.buscar};h.getPrivilegiosByPagina(q).then(l,i)};k.clickBuscar=function(){k.getPrivilegiosByPagina()};k.getPrivilegiosByPagina()}]);