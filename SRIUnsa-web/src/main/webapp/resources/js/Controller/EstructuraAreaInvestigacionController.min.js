
investigacionApp.controller("EstructuraAreaInvestigacionController",["$log","$scope","$location","$rootScope","$filter","EstructuraAreaInvestigacionService","SharedService",function(q,o,g,i,n,e,k){o.sharedService=k;o.areaInvestigaciones=[];o.areaInvestigacion={};o.areas=[];o.subAreas=[];o.disciplinas=[];o.niveles=["Area","Sub Area","Disciplina"];var h=function(u){q.debug("Get AreaInvestigacion - Success");console.log("Respuesta :: ",u);o.areaInvestigaciones=u;l(o.areaInvestigaciones)};var b=function(u){q.debug("Get AreaInvestigacion - Error");console.log("Respuesta :: ",u)};var r=function(u){q.debug("Registrar AreaInvestigacion - Success");console.log("Respuesta :: ",u);o.getAreaInvestigacionByPagina()};var f=function(u){q.debug("Registrar AreaInvestigacion - Error");console.log("Respuesta :: ",u)};var a=function(u){q.debug("Update AreaInvestigacion - Success");console.log("Respuesta :: ",u);o.getAreaInvestigacionByPagina()};var m=function(u){q.debug("Update AreaInvestigacion - Error");console.log("Respuesta :: ",u)};var s=function(u){q.debug("DeleteAreaInvestigacion - Success");console.log("Respuesta :: ",u);o.areaInvestigacion=u};var c=function(u){q.debug("DeleteAreaInvestigacion - Error");console.log("Respuesta :: ",u)};o.getAreaInvestigaciones=function(){e.getAreaInvestigaciones().then(h,b)};o.registrarAreaInvestigacion=function(){var u={nIdPadre:j(),sNivel:o.nivel,sNombre:o.nombre,sestado:"A",suserCreacion:o.sharedService.nombreUsuario,suserModificacion:o.sharedService.nombreUsuario};e.registrarAreaInvestigacion(u).then(r,f)};o.updateAreaInvestigacion=function(){var u={nIdPadre:j(),sNivel:o.nivel,sNombre:o.nombre,nidEstructura:o.areaInvestigacion.nidEstructura,sestado:"A",suserCreacion:o.sharedService.nombreUsuario,suserModificacion:o.sharedService.nombreUsuario};e.updateAreaInvestigacion(u).then(a,m)};o.deleteAreaInvestigacion=function(u){o.areaInvestigacion=u;e.deleteAreaInvestigacion(o.areaInvestigacion).then(s,c)};o.update=function(u){o.areaInvestigacion=u;o.nombre=u.sNombre;o.nivel=u.sNivel;o.changeNivel(u.sNivel);t(u)};o.changeNivel=function(u){switch(u.toUpperCase()){case"AREA":o.showArea=false;o.showSubArea=false;o.showDisciplina=false;break;case"SUB AREA":o.showArea=true;o.showSubArea=false;o.showDisciplina=false;break;case"DISCIPLINA":o.showArea=false;o.showSubArea=true;o.showDisciplina=false;break;default:}};o.cancel=function(){o.nombre="";o.nivel="";o.area={};o.subArea={}};var t=function(u){if(u.sNivel.toUpperCase()==="SUB AREA"){angular.forEach(o.areas,function(w,v){if(w.nidEstructura===u.nIdPadre){o.area=w}})}if(u.sNivel.toUpperCase()==="DISCIPLINA"){angular.forEach(o.subAreas,function(w,v){if(w.nidEstructura===u.nIdPadre){o.subArea=w}})}};var l=function(u){angular.forEach(u,function(w,v){switch(w.sNivel.toUpperCase()){case"AREA":o.areas.push(w);break;case"SUB AREA":o.subAreas.push(w);break;case"DISCIPLINA":o.disciplinas.push(w);break;default:}})};var j=function(){var u=0;if(o.area!==undefined&&o.area!=={}){u=o.area.nidEstructura}if(o.subArea!==undefined&&o.subArea!=={}){u=o.subArea.nidEstructura}return u};o.rangoPaginas=[5,10,20,100];o.currentPage=1;o.currentRango=o.rangoPaginas[0];o.maxSize=5;o.total=0;o.numPages=function(){return Math.ceil(o.total/o.currentRango)};o.$watch("currentPage + currentRango",function(){o.getAreaInvestigacionByPagina()});var d=function(u){q.debug("Get paginacionUsuario - Success");console.log("Respuesta :: ",u);o.areaInvestigaciones=[];o.areaInvestigaciones=u.lista;o.total=u.total};var p=function(u){console.log("error :: ",u)};o.getAreaInvestigacionByPagina=function(){var u={currentPage:o.currentPage,rango:o.currentRango,total:o.total,filtro:o.buscar};e.getAreaInvestigacionByPagina(u).then(d,p)};o.clickBuscar=function(){o.getAreaInvestigacionByPagina()};o.getAreaInvestigaciones();o.getAreaInvestigacionByPagina()}]);