
investigacionApp.controller("ActividadesDocentesController",["$log","$scope","SharedService","FondoConcursableService","SemestreService","TipoInvestigacionService","EstructuraAreaInvestigacionService","TipoNivelService","EstructuraOrganizacionService","ActividadesDocentesService","SRIUnsaConfig",function(t,r,p,j,a,A,d,s,v,q,D){r.sharedService=p;r.loader=false;var w=function(E){t.debug("GettipoNivel - Success");console.log("Respuesta :: ",E);r.niveles=E;r.getEstructuraOrganizaciones()};var m=function(E){t.debug("GetTipoNivel - Error");console.log("Respuesta :: ",E)};var g=function(E){t.debug("GetEstructuraOrganizacion - Success");console.log("Respuesta :: ",E);angular.forEach(E,function(G,F){angular.forEach(E,function(I,H){if(G.nidPadre===I.nidEstructuraOrganizacion){G.nombrePadre=I.snombreEstructuraOrganizacion}});angular.forEach(r.niveles,function(I,H){if(G.nidTipoNivel===I.nidTipoNivel){G.nombreTipoNivel=I.snombreTipoNivel}})});r.estructuraOrganizaciones=E};var e=function(E){t.debug("GetEstructuraOrganizacion - Error");console.log("Respuesta :: ",E)};var C=function(E){t.debug("GetFondo - Success");console.log("Respuesta :: ",E);r.fondos=E};var k=function(E){t.debug("GetFondo - Error",E);console.log("Respuesta :: ",E)};var z=function(E){t.debug("GetSemestre - Success");console.log("Respuesta :: ",E);r.semestres=E};var x=function(E){t.debug("GetSemestre - Error");console.log("Respuesta :: ",E)};var B=function(E){t.debug("GetInvestigacion - Success");console.log("Respuesta :: ",E);r.tipoInvestigaciones=E};var c=function(E){t.debug("GetInvestigacion - Error");console.log("Respuesta :: ",E)};var l=function(E){t.debug("GetAreaInvestigacion - Success");console.log("Respuesta :: ",E);r.areaInvestigaciones=E};var b=function(E){t.debug("GetAreaInvestigacion - Error");console.log("Respuesta :: ",E)};var u=function(E){t.debug("descargarPDF - Success");console.log("Respuesta :: ",E)};var y=function(E){t.debug("descargarPDF - Error");console.log("Respuesta :: ",E)};var n=function(E){t.debug("descargarExcel - Success");console.log("Respuesta :: ",E)};var o=function(E){t.debug("descargarExcel - Error");console.log("Respuesta :: ",E)};r.getListaTipoNivel=function(){s.getListaTipoNivel().then(w,m)};r.getEstructuraOrganizaciones=function(){v.getEstructuraOrganizaciones().then(g,e)};r.getAreaInvestigaciones=function(){d.getAreaInvestigaciones().then(l,b)};r.getFondos=function(){j.getFondos().then(C,k)};r.getSemestres=function(){a.getSemestres().then(z,x)};r.getTipoInvestigacion=function(){A.getInvestigaciones().then(B,c)};r.descargarPDF=function(){q.descargarPDF().then(u,y)};r.descargarExcel=function(){q.descargarExcel().then(n,o)};r.facultadChange=function(){r.departamento={};r.escuela={}};r.departamentoChange=function(){r.escuela={}};r.rangoPaginas=[5,10,20,100];r.currentPage=1;r.currentRango=r.rangoPaginas[0];r.maxSize=5;r.total=0;r.numPages=function(){return Math.ceil(r.total/r.currentRango)};r.$watch("currentPage + currentRango",function(){r.GetActividadesByDocente()});var i=function(){var E={nidTipoActividadInvestigacion:(r.tipoInvestigacion===null||r.tipoInvestigacion===undefined||r.tipoInvestigacion==="")?"":r.tipoInvestigacion.nidTipoActividadInvestigacion,sfacultad:(r.facultad===null||r.facultad===undefined||r.facultad==="")?"":r.facultad.snombreEstructuraOrganizacion,sdepartamento:(r.departamento===null||r.departamento===undefined||r.departamento==="")?"":r.departamento.snombreEstructuraOrganizacion,sescuela:(r.escuela===null||r.escuela===undefined||r.escuela==="")?"":r.escuela.snombreEstructuraOrganizacion,ssemestre:(r.semestre===null||r.semestre===undefined||r.semestre==="")?"":r.semestre.snombreSemestre,sfondoConcursable:(r.fondo===null||r.fondo===undefined||r.fondo==="")?"":r.fondo.snombreFondoConcursable};return E};var f=function(E){t.debug("GetActividadByDocentesDetalle - Success");console.log("Respuesta :: ",E);r.actividadesDocentes=E.lista;r.total=E.total};var h=function(E){t.debug("GetActividadByDocentesDetalle - Error");console.log("Respuesta :: ",E)};r.GetActividadesByDocentesDetalle=function(){var E={currentPage:r.currentPage,rango:r.currentRango,total:r.total,idUsuario:r.sharedService.idUsuario,idEstado:D.CREADO,idFlujoActor:"",filtro:i()};q.GetActividadesByDocentesDetalle(E).then(f,h)};r.filtrar=function(){r.GetActividadesByDocente()};r.getListaTipoNivel();r.getEstructuraOrganizaciones();r.getFondos();r.getSemestres();r.getTipoInvestigacion();r.getAreaInvestigaciones();r.GetActividadesByDocentesDetalle()}]);